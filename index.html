<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SchoolLink - Estrutura Separada</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" href="styles.css"> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-gray-100">

    <div id="auth-container" class="flex items-center justify-center min-h-screen">
        <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm">
            <div class="text-center mb-6">
                <i class="fas fa-graduation-cap text-4xl text-blue-800 mb-2"></i>
                <h1 class="text-3xl font-bold text-gray-800">SchoolLink</h1>
            </div>
            
            <h2 id="auth-title" class="text-xl font-semibold mb-4 text-center">Login</h2>
            
            <form id="auth-form" class="space-y-4">
                <input type="email" id="auth-email" placeholder="E-mail" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" value="admin@admin.com">
                <input type="password" id="auth-password" placeholder="Senha" required class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" value="123456">
                
                <button type="submit" id="auth-submit-btn" class="w-full p-3 text-white font-bold rounded-lg transition duration-200" style="background-color: #4a5c9e;">
                    Entrar
                </button>
            </form>
            
            <div id="auth-feedback" class="feedback error hidden" style="display: none;"></div>

            <p class="text-center mt-4 text-sm auth-switch">
                Não tem conta? <a href="#" id="switch-to-register" class="text-blue-600 hover:underline font-medium">Cadastre-se</a>
            </p>
             <p class="text-center mt-4 text-sm auth-switch-back" style="display: none;">
                <a href="#" id="switch-to-login" class="text-blue-600 hover:underline font-medium">Voltar para Login</a>
            </p>
        </div>
    </div>

    <div id="dashboard-container" class="dashboard-container flex hidden">
        
        <div class="sidebar w-64 bg-gray-800 text-white flex flex-col p-4 shadow-xl">
            <div class="text-center py-4 border-b border-gray-700 mb-6">
                <i class="fas fa-graduation-cap text-3xl text-blue-400 mb-1"></i>
                <h2 class="text-xl font-bold">SchoolLink</h2>
            </div>
            <nav class="flex-grow">
                <a href="#" data-view="dashboard" class="nav-item active block p-3 rounded-lg hover:bg-gray-700 transition duration-150 mb-2">
                    <i class="fas fa-chart-line mr-2"></i> Dashboard
                </a>
                <a href="#" data-view="alunos" class="nav-item block p-3 rounded-lg hover:bg-gray-700 transition duration-150 mb-2">
                    <i class="fas fa-users mr-2"></i> Alunos
                </a>
                <a href="#" data-view="notas" class="nav-item block p-3 rounded-lg hover:bg-gray-700 transition duration-150 mb-2">
                    <i class="fas fa-calculator mr-2"></i> Notas/Faltas
                </a>
                <a href="#" data-view="comunicados" class="nav-item block p-3 rounded-lg hover:bg-gray-700 transition duration-150 mb-2">
                    <i class="fas fa-bullhorn mr-2"></i> Comunicados
                </a>
            </nav>
            <div class="user-info text-sm py-4 border-t border-gray-700">
                <p>Logado como:</p>
                <span id="user-email-display" class="font-medium text-blue-300 truncate">user@escola.com</span>
            </div>
            <button id="logout-btn" class="w-full btn btn-danger mt-2">
                <i class="fas fa-sign-out-alt mr-2"></i> Sair
            </button>
        </div>

        <div class="main-content flex-grow transition-all duration-300">
            
            <header class="header bg-white shadow-md flex items-center justify-between p-4 sticky top-0 z-10 h-16">
                <div class="flex items-center">
                    <button class="menu-toggle text-gray-800 mr-4">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h1 class="header-title text-2xl font-semibold text-gray-800">SchoolLink Dashboard</h1>
                </div>
                <div class="search-box">
                    <input type="text" placeholder="Buscar..." class="p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </header>

            <div id="view-area" class="p-6 space-y-8">
                
                <section id="dashboard-view" class="content-view active">
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">Visão Geral</h2>
                    
                    <div class="grid grid-2-cols gap-6">
                        <div class="card bg-white p-6 rounded-xl shadow-lg flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Total de Alunos</p>
                                <p id="total-alunos" class="text-4xl font-bold text-gray-900">1200</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full text-blue-600">
                                <i class="fas fa-users text-2xl"></i>
                            </div>
                        </div>

                        <div class="card bg-white p-6 rounded-xl shadow-lg flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-500">Novos Comunicados</p>
                                <p id="novos-comunicados" class="text-4xl font-bold text-gray-900">5</p>
                            </div>
                            <div class="bg-yellow-100 p-3 rounded-full text-yellow-600">
                                <i class="fas fa-bullhorn text-2xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <h3 class="text-2xl font-semibold mb-4 text-gray-800">Últimos Comunicados</h3>
                        <div id="comunicados-list" class="space-y-4">
                            <div class="card bg-white p-4 rounded-lg shadow-md">
                                <p class="font-semibold text-gray-800">Reunião de Pais</p>
                                <p class="text-sm text-gray-600">Dia 15/05, às 19h no auditório principal.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="alunos-view" class="content-view">
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">Gestão de Alunos</h2>
                    
                    <div class="flex justify-between items-center mb-4">
                        <div class="filter-bar flex gap-4">
                            <input type="text" id="aluno-search" placeholder="Buscar por nome/CPF..." class="input-select p-2 border border-gray-300 rounded-lg">
                            <select id="aluno-filter-serie" class="input-select p-2 border border-gray-300 rounded-lg">
                                <option value="">Todas as Séries</option>
                                <option value="1">1ª Série</option>
                                <option value="2">2ª Série</option>
                                <option value="3">3ª Série</option>
                            </select>
                        </div>
                        <button id="btn-add-aluno" class="btn btn-primary">
                            <i class="fas fa-plus mr-2"></i> Novo Aluno
                        </button>
                    </div>

                    <div class="card bg-white p-6 rounded-xl shadow-lg">
                        <div class="data-table overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nome</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Série</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">CPF</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="alunos-table-body" class="bg-white divide-y divide-gray-200">
                                    </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="notas-view" class="content-view">
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">Notas e Faltas</h2>
                    <div class="card bg-white p-6 rounded-xl shadow-lg space-y-4">
                        
                        <div>
                            <label for="aluno-notas-select" class="block text-lg font-medium text-gray-700">Selecione o Aluno:</label>
                            <select id="aluno-notas-select" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">-- Selecione um aluno --</option>
                                </select>
                        </div>

                        <h3 class="text-xl font-semibold mt-6 text-gray-800">Histórico de Notas e Faltas</h3>
                        <div class="data-table overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Matéria</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nota 1</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nota 2</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Média</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Faltas</th>
                                    </tr>
                                </thead>
                                <tbody id="historico-notas-body" class="bg-white divide-y divide-gray-200">
                                    <tr><td colspan="5" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">Selecione um aluno para visualizar.</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="comunicados-view" class="content-view">
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">Gestão de Comunicados</h2>
                    
                    <div class="flex justify-end mb-4">
                        <button id="btn-novo-comunicado" class="btn btn-primary">
                            <i class="fas fa-plus mr-2"></i> Novo Comunicado
                        </button>
                    </div>

                    <div class="card bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Comunicados Postados</h3>
                        <div id="comunicados-full-list" class="space-y-4">
                            <p class="text-gray-500">Nenhum comunicado postado.</p>
                        </div>
                    </div>
                </section>

            </div>
            
            <footer class="text-center p-4 text-gray-500 border-t mt-8">
                &copy; 2024 SchoolLink. Todos os direitos reservados.
            </footer>
        </div>
    </div>
    
    <div id="main-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="modal-content bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg">
            <div class="flex justify-between items-center border-b pb-3 mb-4">
                <h3 id="modal-title" class="text-2xl font-bold text-gray-800">Modal Title</h3>
                <button class="close-btn text-gray-500 hover:text-gray-800">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <form id="form-aluno" class="space-y-4" style="display: none;">
                <input type="hidden" id="aluno-id">
                
                <label for="aluno-nome">Nome Completo</label>
                <input type="text" id="aluno-nome" placeholder="Nome Completo" required class="w-full p-3 border rounded-lg">
                
                <label for="aluno-cpf">CPF</label>
                <input type="text" id="aluno-cpf" placeholder="CPF (apenas números)" required class="w-full p-3 border rounded-lg">

                <label for="aluno-serie">Série</label>
                <select id="aluno-serie" required class="w-full p-3 border rounded-lg">
                    <option value="">Selecione a Série</option>
                    <option value="1">1ª Série</option>
                    <option value="2">2ª Série</option>
                    <option value="3">3ª Série</option>
                </select>
                
                <label for="aluno-email-responsavel">E-mail do Responsável (Opcional)</label>
                <input type="email" id="aluno-email-responsavel" placeholder="E-mail do Responsável" class="w-full p-3 border rounded-lg">

                <label for="aluno-documentos">Upload de Documentos (PDF, Imagem)</label>
                <input type="file" id="aluno-documentos" multiple class="w-full p-3 border rounded-lg">
                
                <div id="documentos-existentes" class="space-y-2 mt-2">
                    </div>
                
                <div id="aluno-form-feedback" class="feedback hidden" style="display: none;"></div>
                
                <button type="submit" id="aluno-form-submit-btn" class="w-full btn btn-primary p-3 rounded-lg font-semibold text-white">
                    <i class="fas fa-save mr-2"></i> Salvar Aluno
                </button>
            </form>

            <form id="form-comunicado" class="space-y-4" style="display: none;">
                <label for="comunicado-titulo">Título</label>
                <input type="text" id="comunicado-titulo" placeholder="Título do comunicado" required class="w-full p-3 border rounded-lg">
                
                <label for="comunicado-descricao">Descrição</label>
                <textarea id="comunicado-descricao" placeholder="Descrição completa do comunicado" rows="5" required class="w-full p-3 border rounded-lg"></textarea>
                
                <div id="comunicado-form-feedback" class="feedback hidden" style="display: none;"></div>
                
                <button type="submit" class="w-full btn btn-primary p-3 rounded-lg font-semibold text-white">
                    <i class="fas fa-paper-plane mr-2"></i> Postar Comunicado
                </button>
            </form>

            <div id="aluno-detalhes" style="display: none;">
                <div id="aluno-detalhes-content" class="space-y-3">
                    <p><strong>Nome:</strong> <span id="det-nome"></span></p>
                    <p><strong>CPF:</strong> <span id="det-cpf"></span></p>
                    <p><strong>Série:</strong> <span id="det-serie"></span></p>
                    <h3 class="text-lg font-semibold mt-4 border-t pt-2">Documentos</h3>
                    <div id="det-documentos"></div>
                </div>
                <button id="btn-gerar-pdf" class="btn btn-secondary p-3 rounded-lg font-semibold text-white mt-4">
                    <i class="fas fa-file-pdf mr-2"></i> Gerar Ficha (PDF)
                </button>
            </div>
        </div>
    </div>
    
    <script type="module" src="script.js"></script>
</body>
</html>